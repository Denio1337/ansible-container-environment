# Готовое контейнерное окружение для изучения Ansible

## Общее описание

Предоставляет возможность поднять контейнерное окружение из 3 узлов:

- Управляющий узел с именем control, ОС Ubuntu и установленным Ansible
- Два управляемых узла с именами managed1 и managed2, ОС Ubuntu

Для поднятия контейнеров используется единственная команда:

```sh
docker compose up
```

## Использование

После подъёма контейнеров можно подключиться к управляющему узлу с помощью:

```sh
docker exec -it control bash
```

И выполнять различные команды Ansible для управления двумя узлами, например:

```sh
ansible managed -i inventory.ini -m ping
```

Команда выше задействует модуль Ansible `ping` для выполнения соответствующей команды для всех узлов из группы `managed` инвентаря из файла `inventory.ini`.

Файлы конфигурации для использования Ansible настраиваются в каталоге с соответствующим названием.

## Подробное описание

### Dockerfile.managed

- Dockerfile для сборки образа управляемого узла.
- Основан на ОС Ubuntu последней версии.
- Настраивается SSH для прослушивания подключений с управляемого узла

### Dockerfile.control

- Dockerfile для сборки образа управляющего узла.
- Основан на ОС Ubuntu последней версии.
- Устанавливается Ansible.

### docker-compose.yml

- Общий compose-файл для подъёма всего контейнерного окружения.
- Запуск управляющего узла сопровождается исполнением скрипта `ansible/entrypoint.sh`.

### ansible/entrypoint.sh

- Генерация и копирование ключа SSH на управляемые узлы для последующего беспарольного подключения.
